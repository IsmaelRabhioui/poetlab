<div @itemEnter class="container h-100">
  <div class="d-flex justify-content-center h-100">
    <div class="user_card">
      <div class="d-flex justify-content-center">
        <mat-horizontal-stepper [linear]=true #stepper>
          <mat-step [stepControl]="toRegister1">
            <form [formGroup]="toRegister1">
              <ng-template matStepLabel>Choose a username</ng-template>
              <mat-form-field>
                <input matInput aria-label="Username" placeholder="Username" type="text" formControlName="username"
                  required>
                <mat-error *ngIf="toRegister1.get('username')['errors']?.required && 
          toRegister1.get('username').touched">
                  Fill a username in !
                </mat-error>
                <mat-error
                  *ngIf="toRegister1.get('username')['errors']?.minlength && toRegister1.get('username').touched">
                  At least {{ toRegister1.get('username')['errors'].minlength.requiredLength }} characters long !
                </mat-error>
                <mat-error *ngIf="toRegister1.get('username').errors?.duplicate">
                  Username has already been taken !
                </mat-error>
              </mat-form-field>
              <div>
                <button mat-button matStepperNext>Next</button>
              </div>
            </form>
          </mat-step>
          <mat-step [stepControl]="toRegister2">
            <form [formGroup]="toRegister2">
              <ng-template matStepLabel>Fill your email in</ng-template>
              <mat-form-field>
                <input matInput aria-label="Email" placeholder="Email" type="email" formControlName="email" required />
              </mat-form-field>
              <mat-error *ngIf="toRegister2.get('email')['errors']?.required && 
      toRegister2.get('email').touched">
                Fill an email in !
              </mat-error>
              <mat-error *ngIf="toRegister2.get('email')['errors']?.email && toRegister2.get('email').touched">
                Fill a valid email in !
              </mat-error>
              <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button matStepperNext>Next</button>
              </div>
            </form>
          </mat-step>
          <mat-step [stepControl]="toRegister3">
            <form [formGroup]="toRegister3">
              <ng-template matStepLabel>Fill your email in</ng-template>
              <mat-form-field>
                <input matInput aria-label="Password" placeholder="Password" type="{{showPassword? 'text': 'password'}}"
                  formControlName="password" required />
              </mat-form-field>
              <mat-form-field>
                <input matInput aria-label="Confirm Password" placeholder="Confirm password"
                  type="{{showPassword? 'text': 'password'}}" formControlName="passwordConfirm" required />

              </mat-form-field>
              <button mat-button class="icon-button" (mousedown)="mouseDown()" (mouseup)="mouseUp()">
                <fa-icon [icon]="faEye"></fa-icon>
              </button>
              <mat-error *ngIf="toRegister3.get('password')['errors']?.required && 
              toRegister3.get('password').touched">
                Fill a password in !
              </mat-error>
              <mat-error *ngIf="toRegister3.get('password')['errors']?.minlength && 
              toRegister3.get('password').touched">
                At least {{ toRegister3.get('password')['errors'].minlength.requiredLength }} characters long
              </mat-error>
              <mat-error *ngIf="toRegister3.get('passwordConfirm')['errors']?.required && 
              toRegister3.get('passwordConfirm').touched">
                Confirm your password !
              </mat-error>

              <mat-error *ngIf="toRegister3.status === 'INVALID' && 
        toRegister3.get('passwordConfirm').touched">
                The passwords do not match !
              </mat-error>

              <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button matStepperNext>Next</button>
              </div>
            </form>
          </mat-step>
          <mat-step>
            <form [formGroup]="toRegister3" (ngSubmit)="onSubmit()">
              <ng-template matStepLabel>Done</ng-template>
              You are now done.
              <div>
                <button mat-button matStepperPrevious>Back</button>
                <button mat-button (click)="stepper.reset()">Reset</button>
                <button type='submit' mat-raised-button color='primary'>
                  Register
                </button>
              </div>
            </form>
          </mat-step>
        </mat-horizontal-stepper>
      </div>
    </div>
  </div>
</div>
